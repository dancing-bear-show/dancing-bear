# direnv: auto-activate local virtualenv and set helpful paths

# Fallback for PATH_add when direnv helpers are unavailable
if ! command -v PATH_add >/dev/null 2>&1; then
  PATH_add() { export PATH="$1:${PATH}"; }
fi

# Auto-activate local venv (cars-sre-utils style) if present
if [ -d .venv ]; then
  # shellcheck source=/dev/null
  . .venv/bin/activate
fi

# Add repo root to PYTHONPATH for direct module resolution
export PYTHONPATH="$PWD${PYTHONPATH:+:$PYTHONPATH}"

# Convenience: prefer local bin wrappers
PATH_add bin

# Ensure Apple Configurator's cfgutil is on PATH for iOS helpers
PATH_add "/Applications/Apple Configurator.app/Contents/MacOS"

# Silence pipâ€™s version check in local workflows
export PIP_DISABLE_PIP_VERSION_CHECK=1
